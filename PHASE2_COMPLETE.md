# Phase 2 å®ŒæˆæŠ¥å‘Šï¼šåç«¯ API åŒ–é‡æ„

## ğŸ¯ ç›®æ ‡è¾¾æˆ
æˆåŠŸå°†å•æœº CLI ç‰ˆ Poker Assistant é‡æ„ä¸ºåŸºäº **FastAPI + WebSocket** çš„å®æ—¶å¯¹æˆ˜æœåŠ¡å™¨ã€‚

## ğŸ›  æ ¸å¿ƒæ¶æ„æˆæœ

### 1. å¼‚æ­¥é€šä¿¡æ¶æ„
- **WebSocket æœåŠ¡**ï¼šå®ç°äº† `/ws/game` ç«¯ç‚¹ï¼Œæ”¯æŒå…¨åŒå·¥å®æ—¶é€šä¿¡ã€‚
- **ConnectionManager**ï¼šç®¡ç†å®¢æˆ·ç«¯è¿æ¥ï¼Œæ”¯æŒå•ç‚¹æ¶ˆæ¯å‘é€å’Œå…¨å±€å¹¿æ’­ã€‚
- **æ¶ˆæ¯åè®®**ï¼šå®šä¹‰äº†æ¸…æ™°çš„ JSON æ¶ˆæ¯æ ¼å¼ï¼ˆ`type` + `data`ï¼‰ï¼Œæ¶µç›– `game_start`, `round_start`, `action_request`, `game_update` ç­‰äº‹ä»¶ã€‚

### 2. æ¸¸æˆå¼•æ“å®¹å™¨åŒ–
- **GameManager**ï¼šåˆ›å»ºäº†å•ä¾‹ç®¡ç†å™¨ï¼Œåœ¨ç‹¬ç«‹çº¿ç¨‹ä¸­è¿è¡Œ `PyPokerEngine`ï¼Œç¡®ä¿ä¸é˜»å¡ Web æœåŠ¡ä¸»çº¿ç¨‹ã€‚
- **çº¿ç¨‹é—´é€šä¿¡**ï¼šä½¿ç”¨ Python `queue.Queue` å®ç°äº†ä¸»çº¿ç¨‹ï¼ˆWebï¼‰ä¸æ¸¸æˆçº¿ç¨‹ï¼ˆEngineï¼‰ä¹‹é—´çš„å®‰å…¨é€šä¿¡ã€‚

### 3. å¼‚æ­¥ç©å®¶é€‚é…å™¨
- **AsyncHumanPlayer**ï¼šé‡å†™äº†äººç±»ç©å®¶ç±»ã€‚å®ƒä¸å†ç›´æ¥è¯»å– CLI è¾“å…¥ï¼Œè€Œæ˜¯å°†å†³ç­–è¯·æ±‚æ¨é€åˆ° `request_queue`ï¼Œå¹¶æŒ‚èµ·ç­‰å¾…å‰ç«¯é€šè¿‡ WebSocket å‘å›çš„ `response_queue` æŒ‡ä»¤ã€‚

### 4. æµ‹è¯•ä¸éªŒè¯
- **test_backend.py**ï¼šå¼€å‘äº†æ¨¡æ‹Ÿ Web å‰ç«¯çš„æµ‹è¯•è„šæœ¬ï¼ŒæˆåŠŸéªŒè¯äº†å®Œæ•´çš„æ¸¸æˆç”Ÿå‘½å‘¨æœŸï¼ˆè¿æ¥ -> æ¸¸æˆå¼€å§‹ -> æ”¶åˆ°æ‰‹ç‰Œ -> å‘é€å†³ç­– -> æ¥æ”¶å¹¿æ’­ -> ç»“ç®—ï¼‰ã€‚

## ğŸ“‚ å…³é”®æ–‡ä»¶æ¸…å•
- `backend/main.py`: FastAPI å…¥å£
- `backend/game_manager.py`: æ¸¸æˆçº¿ç¨‹ç®¡ç†å™¨
- `backend/connection_manager.py`: WebSocket è¿æ¥ç®¡ç†
- `poker_assistant/engine/async_human_player.py`: å¼‚æ­¥ç©å®¶é€‚é…å™¨
- `requirements-web.txt`: Web ä¾èµ–æ¸…å•

## ğŸ”œ ä¸‹ä¸€æ­¥ (Phase 3)
- **Web å‰ç«¯å¼€å‘**ï¼šä½¿ç”¨ React/Vue æˆ– Streamlit æ„å»ºå›¾å½¢åŒ–ç•Œé¢ã€‚
- **å¯è§†åŒ–å¢å¼º**ï¼šåœ¨ Web ç«¯å®ç°å¡ç‰Œã€ç­¹ç ã€å¤´åƒçš„ç²¾ç¾æ¸²æŸ“ã€‚
- **äº¤äº’ä¼˜åŒ–**ï¼šå®ç°æ‹–æ‹½ä¸‹æ³¨ã€å¿«æ·å–Šè¯ç­‰åŠŸèƒ½ã€‚

